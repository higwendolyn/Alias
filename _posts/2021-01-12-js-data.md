---
layout: post
title: "JS基础---数据类型（未完）"
---

JS基础，从概念、检测方法、转换方法讲解js数据类型。

## 概念

![image.png](../../../images/js1.png)

**基础类型和引用类型**

*基础类型*：存储在**栈**内存中，被引用或拷贝时，会创建一个完全相等的变量

*引用类型*：存储在**堆**内存中，存储的是地址，多个引用指向同一个地址，这里涉及一个“共享”的概念

```javascript
let a = {
    name: 'lee',
    age: 18
}
let b = a;
console.log(a.name);
b.name = 'son';
console.log(a.name);
console.log(b.name);
```

```javascript
let a = {
    name: 'Julia',
    age: 20
}
function change(o) { // 函数传参的对象，传递的是对象在堆中的地址
    o.age = 24; // 确实改变了o的属性值
    o = {
        name: 'Kath',
        age: 30
    }
    return o; // 但是此处又把o变成了另一个内存地址，并存入数据，没有return，则返回一个undefined
}
let b = change(a);
console.log(b.age);
console.log(a.age);
```

## 检测

typeof：可以判断基本数据类型（null除外），但是引用数据类型中，除了function类型以外，其他的无法判断;

instanceof：可以准确判断复杂引用数据类型，但是不能准确判断基础数据类型；

Object.prototype.toString：可以准确判断，但是返回格式是[object Xxx];

```javascript
typeof 1 // 'number'
typeof '1' // 'string'
typeof undefined // 'undefined'
typeof true // 'boolean'
typeof Symbol() // 'symbol'
typeof null // 'object',js历史悠久的bug，建议用===null判断
typeof [] // 'object'
typeof {} // 'object'
typeof console // 'object'
typeof console.log // 'function'
```

```javascript
let Car = function(){}
let benz = new Car()
benz instanceof Car // true

let car = new String('Mercedes Benz')
car instanceof String // true

let str = 'Covid-9' // str只是一个以string为数据类型的值，但并不属于String对象的实例
str instanceof String // false，可以使用原型链判断
```

```javascript
Object.prototype.toString({}) // '[object Object]'
Object.prototype.toString.call({}) // 结果同上加上call也ok
Object.prototype.toString.call(1) // '[object Number]'
Object.prototype.toString.call('1') // '[object String]'
Object.prototype.toString.call(true) // '[object Boolean]'
Object.prototype.toString.call(function(){}) // '[object Function]'
Object.prototype.toString.call(null) // '[object Null]'
Object.prototype.toString.call(undefined) // '[object Undefined]'
Object.prototype.toString.call(/123/g) // '[object RegExp]'
Object.prototype.toString.call(new Date()) // '[object Date]'
Object.prototype.toString.call([]) // '[object Array]'
Object.prototype.toString.call(document) // '[object HTMLDocument]'
Object.prototype.toString.call(window) // '[object Window]'
```